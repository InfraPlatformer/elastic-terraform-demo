# Complete Elasticsearch and Kibana Infrastructure Configuration
# Copy this file to terraform.tfvars and customize the values

# =============================================================================
# AWS Configuration
# =============================================================================
aws_region = "us-west-2"
environment = "demo"

# =============================================================================
# VPC Configuration
# =============================================================================
vpc_cidr = "10.0.0.0/16"
availability_zones = ["us-west-2a", "us-west-2b", "us-west-2c"]

# =============================================================================
# EKS Cluster Configuration
# =============================================================================
cluster_name = "elastic-demo-cluster"
cluster_version = "1.29"

# Node Groups Configuration
node_groups = {
  elasticsearch = {
    instance_type = "t3.medium"    # 2 vCPU, 4 GB RAM
    min_size      = 2
    max_size      = 5
    desired_size  = 3
  }
  kibana = {
    instance_type = "t3.small"     # 2 vCPU, 2 GB RAM
    min_size      = 1
    max_size      = 3
    desired_size  = 2
  }
}

# =============================================================================
# Elasticsearch Configuration
# =============================================================================
elasticsearch_version = "8.11.0"
elasticsearch_replicas = 2
elasticsearch_storage_size = "100Gi"
elasticsearch_memory_limit = "2Gi"
elasticsearch_cpu_limit = "1000m"

# =============================================================================
# Kibana Configuration
# =============================================================================
kibana_version = "8.11.0"
kibana_replicas = 2
kibana_storage_size = "10Gi"
kibana_memory_limit = "1Gi"
kibana_cpu_limit = "500m"

# =============================================================================
# Security Configuration
# =============================================================================
enable_tls = true
elastic_password = "changeme123!"      # CHANGE THIS TO A SECURE PASSWORD
kibana_password = "changeme123!"       # CHANGE THIS TO A SECURE PASSWORD

# =============================================================================
# Monitoring and Observability
# =============================================================================
enable_monitoring = true
enable_logging = true

# =============================================================================
# Ingress and External Access
# =============================================================================
enable_ingress = false                 # Set to true if using ingress controller

# =============================================================================
# Autoscaling Configuration
# =============================================================================
enable_autoscaling = true

# =============================================================================
# Backup and Disaster Recovery
# =============================================================================
enable_backup = true
backup_retention_days = 30

# =============================================================================
# Resource Tags
# =============================================================================
common_tags = {
  Project     = "elastic-terraform-demo"
  ManagedBy   = "terraform"
  Owner       = "iac-demo"
  Purpose     = "presentation"
  Environment = "demo"
  CostCenter  = "engineering"
}

# =============================================================================
# Advanced Configuration Options
# =============================================================================

# Custom Elasticsearch JVM Options (optional)
# elasticsearch_jvm_opts = "-Xms1g -Xmx1g -XX:+UseG1GC"

# Custom Kibana Configuration (optional)
# kibana_additional_config = {
#   "xpack.reporting.enabled" = "true"
#   "xpack.security.enabled" = "true"
# }

# Custom Monitoring Configuration (optional)
# prometheus_retention_days = 15
# grafana_admin_password = "admin123"

# =============================================================================
# Production Configuration Examples
# =============================================================================

# For Production Environment:
# environment = "production"
# cluster_name = "elastic-prod-cluster"
# elasticsearch_replicas = 3
# kibana_replicas = 3
# elasticsearch_storage_size = "500Gi"
# elasticsearch_memory_limit = "4Gi"
# elasticsearch_cpu_limit = "2000m"
# kibana_memory_limit = "2Gi"
# kibana_cpu_limit = "1000m"
# enable_tls = true
# enable_monitoring = true
# enable_backup = true
# backup_retention_days = 90

# For Development Environment:
# environment = "development"
# cluster_name = "elastic-dev-cluster"
# elasticsearch_replicas = 1
# kibana_replicas = 1
# elasticsearch_storage_size = "50Gi"
# elasticsearch_memory_limit = "1Gi"
# elasticsearch_cpu_limit = "500m"
# kibana_memory_limit = "512Mi"
# kibana_cpu_limit = "250m"
# enable_tls = false
# enable_monitoring = false
# enable_backup = false

# =============================================================================
# Cost Optimization Examples
# =============================================================================

# For Cost-Conscious Deployments:
# node_groups = {
#   elasticsearch = {
#     instance_type = "t3.small"     # Smaller instances
#     min_size      = 1
#     max_size      = 3
#     desired_size  = 1
#   }
#   kibana = {
#     instance_type = "t3.micro"     # Micro instances
#     min_size      = 1
#     max_size      = 2
#     desired_size  = 1
#   }
# }
# elasticsearch_storage_size = "50Gi"
# kibana_storage_size = "5Gi"

# =============================================================================
# High Availability Configuration
# =============================================================================

# For High Availability:
# availability_zones = ["us-west-2a", "us-west-2b", "us-west-2c"]
# elasticsearch_replicas = 3
# kibana_replicas = 3
# node_groups = {
#   elasticsearch = {
#     instance_type = "t3.medium"
#     min_size      = 3
#     max_size      = 6
#     desired_size  = 3
#   }
#   kibana = {
#     instance_type = "t3.small"
#     min_size      = 2
#     max_size      = 4
#     desired_size  = 2
#   }
# } 